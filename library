Find the blocker session holding the library Cache
â€“Find the blocking session holding library cache lock

col sid format 9999
col username format a15
col terminal format a10
col program format a15
SELECT SID,USERNAME,TERMINAL,PROGRAM FROM V$SESSION
WHERE SADDR in
(SELECT KGLLKSES FROM X$KGLLK LOCK_A
WHERE KGLLKREQ = 0
AND EXISTS (SELECT LOCK_B.KGLLKHDL FROM X$KGLLK LOCK_B
WHERE KGLLKSES in (select saddr from v$session where sid in
(select sid from v$session_wait where event like 'library cache lock'))
AND LOCK_A.KGLLKHDL = LOCK_B.KGLLKHDL
AND KGLLKREQ > 0)
);
